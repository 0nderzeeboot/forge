Name:Shining Shoal
ManaCost:X W W
Types:Instant Arcane

# Cast normally via announce X
A:SP$ ChoosePlayer | Cost$ X W W | ValidTgts$ Creature,Player | TgtPrompt$ Select target creature or player | Choices$ TargetedPlayer | Defined$ You | SubAbility$ DBChooseCreature | StackDescription$ SpellDescription | SpellDescription$ The next X damage that would be dealt to target creature or player this turn is dealt to target creature or player instead.
SVar:DBChooseCreature:DB$ ChooseCard | DefinedCards$ Targeted | Mandatory$ True | Defined$ You | SubAbility$ DBSetVarBefore
SVar:DBSetVarBefore:DB$ StoreSVar | SVar$ Y | Type$ CountSVar | Expression$ X | SubAbility$ DBEffect
SVar:DBEffect:DB$ Effect | ValidTgts$ Creature,Player | TgtPrompt$ Select target creature or player to redirect the damage to | ReplacementEffects$ ManeuverDamage | Triggers$ OutOfSight | SVars$ ManeuverDamage,ManeuverDmg,ExileEffect,OutOfSight,Y | References$ ManeuverDamage,OutOfSight,ManeuverDmg,ExileEffect,Y | RememberObjects$ ThisTargetedCard,ThisTargetedPlayer | SubAbility$ DBCleanup
SVar:ManeuverDamage:Event$ DamageDone | ValidTarget$ Card.Creature+ChosenCard,Player.Chosen | ReplaceWith$ ManeuverDmg | DamageTarget$ Remembered | References$ Y | Description$ The next X damage that would be dealt to target creature or player this turn is dealt to target creature or player instead.
SVar:ManeuverDmg:DB$ ReplaceSplitDamage | DamageTarget$ Remembered | VarName$ Y | References$ Y
SVar:X:Count$xPaid
#X Will get overwritten by Announce
SVar:Y:Number$0

# Exile from hand
A:SP$ ChoosePlayer | Cost$ ExileFromHand<1/Card.White> | CostDesc$ You may exile a white card with converted mana cost X from your hand rather than pay Shining Shoal's mana cost. | ValidTgts$ Creature,Player | TgtPrompt$ Select target creature or player | Choices$ TargetedPlayer | Defined$ You | SubAbility$ DBChooseCreatureA | StackDescription$ SpellDescription | SpellDescription$ The next X damage that would be dealt to target creature or player this turn is dealt to target creature or player instead.
SVar:DBChooseCreatureA:DB$ ChooseCard | DefinedCards$ Targeted | Mandatory$ True | Defined$ You | SubAbility$ DBSetVarBeforeA
SVar:DBSetVarBeforeA:DB$ StoreSVar | SVar$ ZZ | Type$ CountSVar | Expression$ Z | SubAbility$ DBEffectA
SVar:DBEffectA:DB$ Effect | ValidTgts$ Creature,Player | TgtPrompt$ Select target creature or player to redirect the damage to | ReplacementEffects$ ManeuverDamageA | Triggers$ OutOfSight | SVars$ ManeuverDamageA,ManeuverDmgA,ExileEffect,OutOfSight,ZZ | References$ ManeuverDamageA,OutOfSight,ManeuverDmgA,ExileEffect,ZZ | RememberObjects$ ThisTargetedCard,ThisTargetedPlayer | SubAbility$ DBCleanup
SVar:ManeuverDamageA:Event$ DamageDone | ValidTarget$ Card.Creature+ChosenCard,Player.Chosen | ReplaceWith$ ManeuverDmgA | DamageTarget$ Remembered | References$ ZZ | Description$ The next X damage that would be dealt to target creature or player this turn is dealt to target creature or player instead.
SVar:ManeuverDmgA:DB$ ReplaceSplitDamage | DamageTarget$ Remembered | VarName$ ZZ | References$ ZZ
SVar:Z:Exiled$CardManaCost
#ZZ is used to store the exiled card mana cost, which is not available otherwise to the effect
SVar:ZZ:Number$0

# Used by both casting variants
SVar:OutOfSight:Mode$ ChangesZone | Origin$ Battlefield | Destination$ Any | ValidCard$ Card.ChosenCard,Card.IsRemembered | Execute$ ExileEffect | Static$ True
SVar:ExileEffect:DB$ ChangeZone | Defined$ Self | Origin$ Command | Destination$ Exile
SVar:DBCleanup:DB$ Cleanup | ClearChosenCard$ True | ClearChosenPlayer$ True

SVar:RemAIDeck:True

SVar:Picture:http://www.wizards.com/global/images/magic/general/shining_shoal.jpg
Oracle:You may exile a white card with converted mana cost X from your hand rather than pay Shining Shoal's mana cost.\nThe next X damage that a source of your choice would deal to you and/or creatures you control this turn is dealt to target creature or player instead.
